<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/style.css" rel="stylesheet" type="text/css">
<section>
  <div class="clear"></div>
  <div class="col-md-12">
    <div class="content-box">
      <div class="white-con">
        <h1>Sessions
          <span></span>
        </h1>
        <div class="inner-white-box">
          <div class="col-md-12">
            <div class="col-md-4 float-left pl-0 pr-5">
              <label>Search:</label>
              <input type="text" class="field-01 form-control" name="search" placeholder="Company or Audit name" [(ngModel)]="SearchCompanyAndAudit">
            </div>
            <div class="col-md-4 float-left pl-0 pr-5">
              <label>Type:</label>
              <select id="StartEndDateSearch" class="field-01 form-control" [(ngModel)]="StartEndDateSearch">
                <option selected class=""  value="">-SELECT-</option>
                <option value="fiscalStartDate">Fiscal Start Date</option>
                <option value="fiscalEndDate">Fiscal End Date</option>
              </select>
            </div>
            <div class="col-md-4 float-left pl-0 pr-5">
              <span></span>
            </div>
          </div>
          <div class="col-md-12">
            <div class="col-md-4 float-left pl-0 pr-5">
              <label>Range Start:</label>
              <input class="field-01 form-control" type="date" id="start" [(ngModel)]="startDate" placeholder="MM-DD-YYYY" />
            </div>
            <div class="col-md-4 float-left pl-0 pr-5">
              <label>Range End</label>
              <input class="field-01 form-control" type="date" [(ngModel)]="endDate" placeholder="MM-DD-YYYY" />
            </div>
            <div class="col-md-4 float-left pl-0 pr-5">
              <a (click)="onSubmit()" class="main-search-btn"></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="clear"></div>
  <!-- <div class="main-table-con" *ngIf="this.checkObject.canView"> -->
    <div class="main-table-con">
    <div class="col-md-12">
      <div class="content-box">
        <a (click)="addSession()" class="mt-add-row-btn" *ngIf="this.checkObject.canAdd"></a>
        
        <div class="table-outer-con">
          <div id="table" class="table-editable">
            <table width="100%" border="0" cellspacing="0" cellpadding="0" class="main-table mt-0">
              <tr>
                <th>Company</th>
                <th>Audit Name</th>
                <th>Fiscal Start Date</th>
                <th>Fiscal End Date</th>
                <th>Status</th>
                <th>&nbsp;</th>
              </tr>
              <tr *ngFor="let person of this.personList; let id = index">
                <td>{{person.clientId.clientName}}</td>
                <td>{{person.auditName}}</td>
                <td>{{person.fiscalStartDate}}</td>
                <td>{{person.fiscalEndDate}}</td>
                <td>
                  <span *ngIf="person.status===0">In Progress</span>
                  <span *ngIf="person.status===1">Completed</span>
                  <span *ngIf="person.status===2">Aborted</span>
                </td>
                <td>
                  <!-- <a *ngIf="person.status===0 && this.checkObject.canEdit" (click)="abort(person.id)" class="">Abort</a> -->
                  <button *ngIf="person.status===0" (click)="startAudit(person.id)" class="green-btn btn-01  float-right mt-3" data-toggle="modal" data-target="#myModal">Start Audit</button>
                  
                  <!-- <a *ngIf="person.status!==2 && this.checkObject.canEdit" (click)="editSession(person.id)" class="mt-edit-btn"></a> -->
                </td>
              </tr>
            </table>
          </div>
        </div>
        <div class="clear"></div>

        <div id="myModal" class="modal fade" role="dialog">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header border-0">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>
              <div class="modal-body">
                <!-- <label>Name:*</label>
                <input type="text" [(ngModel)]="roleName" name="name" class="textfield" required placeholder="Name">
                <div class="text-box color-white text-16">
                  <input type="checkbox"  [(ngModel)]="isActive">
                  Active</div>    -->
                  <div class="col-md-12 float-left pl-0 pr-5">
                    <div class="col-md-3 float-left pl-0 pr-0 mt-4">
                      <label *ngFor="let control of this.controlsList_dialog">{{control.control.name}}</label>
                    </div>
                    <!-- <div class="col-md-9 float-left pl-0 pr-0 mt-4">
                      <input type="text" name="" class="field-01 form-control" placeholder="Name" [(ngModel)]="roleName" required > 
                    </div> -->
                  
                    <!-- <div class="col-md-3 float-left pl-0 pr-0 mt-4"><label>Status:</label></div> -->
                    <div class="col-md-9 float-left pl-0 pr-0 mt-4">
                      <div class="lt-btn aax-blue-btn float-right"><a *ngFor="let control of this.controlsList_dialog" (click)="executeControl(control.control.id)">Execute</a></div>
                      
                      <!-- <label class="cc" >
                        <input type="checkbox"[(ngModel)]="isActive" >
                        <span class="checkmark"></span>
                      </label> -->
                    </div>
                  </div> 
              </div>
              <div class="modal-footer">
                <!-- <button type="button" class="btn green-btn" data-dismiss="modal" (click)="onYesClick()">Save</button> -->
                <button type="button" class="btn blue-btn" data-dismiss="modal" id="closebutton" hidden>Close</button>
              </div>
            </div>
          </div>
        </div>



      </div>
    </div>
  </div>
</section>
